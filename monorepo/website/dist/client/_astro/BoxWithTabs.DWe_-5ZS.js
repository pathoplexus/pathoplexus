import{K as T,y as B,o as g,$ as oe,a as ue,w as ie,_ as X,e as ce,L as D,u as de,x as me,i as j,p as fe,R as pe,n as O,b as ve,c as be,d as Y,O as z,r as Ie,f as I}from"./open-closed.CJcKiZsm.js";import{r as p,R as w}from"./index.BOC3FD3Q.js";import{r as C}from"./index.CExoqQxK.js";import{s as xe,a as ge}from"./unlocked.BhwIO2z4.js";import{F as ye,d as he,x as Se,R as Ee,e as $e,n as Pe,m as Me,g as Re,h as we,i as Te,j as De,r as ke,u as Fe,K as Z,w as _e,k as Ae,M as Ne,P as Ce,l as x,G as ee,p as Oe,q as J,t as H,_ as je,A as Be,v as Ke}from"./index.B7uol7Hd.js";import{j as A}from"./jsx-runtime.C9E4cUVc.js";var Qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qe||{}),Ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ue||{}),He=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(He||{});function L(e,n=l=>l){let l=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=je(n(e.items.slice()),s=>s.dataRef.current.domRef.current),a=l?r.indexOf(l):null;return a===-1&&(a=null),{items:r,activeItemIndex:a}}let Le={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,n)=>{var l,r,a,s,u;if(e.menuState===1)return e;let d={...e,searchQuery:"",activationTrigger:(l=n.trigger)!=null?l:1,__demoMode:!1};if(n.focus===x.Nothing)return{...d,activeItemIndex:null};if(n.focus===x.Specific)return{...d,activeItemIndex:e.items.findIndex(f=>f.id===n.id)};if(n.focus===x.Previous){let f=e.activeItemIndex;if(f!==null){let b=e.items[f].dataRef.current.domRef,t=H(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(t!==null){let i=e.items[t].dataRef.current.domRef;if(((r=b.current)==null?void 0:r.previousElementSibling)===i.current||((a=i.current)==null?void 0:a.previousElementSibling)===null)return{...d,activeItemIndex:t}}}}else if(n.focus===x.Next){let f=e.activeItemIndex;if(f!==null){let b=e.items[f].dataRef.current.domRef,t=H(n,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.current.disabled});if(t!==null){let i=e.items[t].dataRef.current.domRef;if(((s=b.current)==null?void 0:s.nextElementSibling)===i.current||((u=i.current)==null?void 0:u.nextElementSibling)===null)return{...d,activeItemIndex:t}}}}let c=L(e),m=H(n,{resolveItems:()=>c.items,resolveActiveIndex:()=>c.activeItemIndex,resolveId:f=>f.id,resolveDisabled:f=>f.dataRef.current.disabled});return{...d,...c,activeItemIndex:m}},3:(e,n)=>{let l=e.searchQuery!==""?0:1,r=e.searchQuery+n.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+l).concat(e.items.slice(0,e.activeItemIndex+l)):e.items).find(u=>{var d;return((d=u.dataRef.current.textValue)==null?void 0:d.startsWith(r))&&!u.dataRef.current.disabled}),s=a?e.items.indexOf(a):-1;return s===-1||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,n)=>{let l=L(e,r=>[...r,{id:n.id,dataRef:n.dataRef}]);return{...e,...l}},6:(e,n)=>{let l=L(e,r=>{let a=r.findIndex(s=>s.id===n.id);return a!==-1&&r.splice(a,1),r});return{...e,...l,activationTrigger:1}},7:(e,n)=>e.buttonElement===n.element?e:{...e,buttonElement:n.element},8:(e,n)=>e.itemsElement===n.element?e:{...e,itemsElement:n.element}},V=p.createContext(null);V.displayName="MenuContext";function K(e){let n=p.useContext(V);if(n===null){let l=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(l,K),l}return n}function Ve(e,n){return Y(n.type,Le,e,n)}let Ge=p.Fragment;function qe(e,n){let{__demoMode:l=!1,...r}=e,a=p.useReducer(Ve,{__demoMode:l,menuState:l?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:s,itemsElement:u,buttonElement:d},c]=a,m=B(n);Ae(s===0,[d,u],(E,h)=>{c({type:1}),Be(h,Ke.Loose)||(E.preventDefault(),d?.focus())});let f=g(()=>{c({type:1})}),b=p.useMemo(()=>({open:s===0,close:f}),[s,f]),t={ref:m},i=D();return w.createElement(Ne,null,w.createElement(V.Provider,{value:a},w.createElement(be,{value:Y(s,{0:j.Open,1:j.Closed})},i({ourProps:t,theirProps:r,slot:b,defaultTag:Ge,name:"Menu"}))))}let We="button";function ze(e,n){var l;let r=p.useId(),{id:a=`headlessui-menu-button-${r}`,disabled:s=!1,autoFocus:u=!1,...d}=e,[c,m]=K("Menu.Button"),f=ye(),b=B(n,he(),g(v=>m({type:7,element:v}))),t=g(v=>{switch(v.key){case I.Space:case I.Enter:case I.ArrowDown:v.preventDefault(),v.stopPropagation(),C.flushSync(()=>m({type:0})),m({type:2,focus:x.First});break;case I.ArrowUp:v.preventDefault(),v.stopPropagation(),C.flushSync(()=>m({type:0})),m({type:2,focus:x.Last});break}}),i=g(v=>{switch(v.key){case I.Space:v.preventDefault();break}}),E=g(v=>{var _;if(Ie(v.currentTarget))return v.preventDefault();s||(c.menuState===0?(C.flushSync(()=>m({type:1})),(_=c.buttonElement)==null||_.focus({preventScroll:!0})):(v.preventDefault(),m({type:0})))}),{isFocusVisible:h,focusProps:$}=oe({autoFocus:u}),{isHovered:P,hoverProps:k}=ue({isDisabled:s}),{pressed:M,pressProps:S}=ie({disabled:s}),F=p.useMemo(()=>({open:c.menuState===0,active:M||c.menuState===0,disabled:s,hover:P,focus:h,autofocus:u}),[c,P,h,M,s,u]),R=X(f(),{ref:b,id:a,type:ce(e,c.buttonElement),"aria-haspopup":"menu","aria-controls":(l=c.itemsElement)==null?void 0:l.id,"aria-expanded":c.menuState===0,disabled:s||void 0,autoFocus:u,onKeyDown:t,onKeyUp:i,onClick:E},$,k,S);return D()({ourProps:R,theirProps:d,slot:F,defaultTag:We,name:"Menu.Button"})}let Je="div",Xe=z.RenderStrategy|z.Static;function Ye(e,n){var l,r;let a=p.useId(),{id:s=`headlessui-menu-items-${a}`,anchor:u,portal:d=!1,modal:c=!0,transition:m=!1,...f}=e,b=Se(u),[t,i]=K("Menu.Items"),[E,h]=Ee(b),$=$e(),[P,k]=p.useState(null),M=B(n,b?E:null,g(o=>i({type:8,element:o})),k),S=Pe(t.itemsElement);b&&(d=!0);let F=de(),[R,v]=me(m,P,F!==null?(F&j.Open)===j.Open:t.menuState===0);Me(R,t.buttonElement,()=>{i({type:1})});let _=t.__demoMode?!1:c&&t.menuState===0;Re(_,S);let Q=t.__demoMode?!1:c&&t.menuState===0;we(Q,{allowed:p.useCallback(()=>[t.buttonElement,t.itemsElement],[t.buttonElement,t.itemsElement])});let U=t.menuState!==0,y=xe(U,t.buttonElement)?!1:R;p.useEffect(()=>{let o=t.itemsElement;o&&t.menuState===0&&o!==S?.activeElement&&o.focus({preventScroll:!0})},[t.menuState,t.itemsElement,S]),Te(t.menuState===0,{container:t.itemsElement,accept(o){return o.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:o.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(o){o.setAttribute("role","none")}});let N=fe(),te=g(o=>{var G,q,W;switch(N.dispose(),o.key){case I.Space:if(t.searchQuery!=="")return o.preventDefault(),o.stopPropagation(),i({type:3,value:o.key});case I.Enter:if(o.preventDefault(),o.stopPropagation(),i({type:1}),t.activeItemIndex!==null){let{dataRef:se}=t.items[t.activeItemIndex];(q=(G=se.current)==null?void 0:G.domRef.current)==null||q.click()}ee(t.buttonElement);break;case I.ArrowDown:return o.preventDefault(),o.stopPropagation(),i({type:2,focus:x.Next});case I.ArrowUp:return o.preventDefault(),o.stopPropagation(),i({type:2,focus:x.Previous});case I.Home:case I.PageUp:return o.preventDefault(),o.stopPropagation(),i({type:2,focus:x.First});case I.End:case I.PageDown:return o.preventDefault(),o.stopPropagation(),i({type:2,focus:x.Last});case I.Escape:o.preventDefault(),o.stopPropagation(),C.flushSync(()=>i({type:1})),(W=t.buttonElement)==null||W.focus({preventScroll:!0});break;case I.Tab:o.preventDefault(),o.stopPropagation(),C.flushSync(()=>i({type:1})),Oe(t.buttonElement,o.shiftKey?J.Previous:J.Next);break;default:o.key.length===1&&(i({type:3,value:o.key}),N.setTimeout(()=>i({type:4}),350));break}}),ne=g(o=>{switch(o.key){case I.Space:o.preventDefault();break}}),re=p.useMemo(()=>({open:t.menuState===0}),[t.menuState]),ae=X(b?$():{},{"aria-activedescendant":t.activeItemIndex===null||(l=t.items[t.activeItemIndex])==null?void 0:l.id,"aria-labelledby":(r=t.buttonElement)==null?void 0:r.id,id:s,onKeyDown:te,onKeyUp:ne,role:"menu",tabIndex:t.menuState===0?0:void 0,ref:M,style:{...f.style,...h,"--button-width":De(t.buttonElement,!0).width},...pe(v)}),le=D();return w.createElement(ke,{enabled:d?e.static||R:!1},le({ourProps:ae,theirProps:f,slot:re,defaultTag:Je,features:Xe,visible:y,name:"Menu.Items"}))}let Ze=p.Fragment;function et(e,n){let l=p.useId(),{id:r=`headlessui-menu-item-${l}`,disabled:a=!1,...s}=e,[u,d]=K("Menu.Item"),c=u.activeItemIndex!==null?u.items[u.activeItemIndex].id===r:!1,m=p.useRef(null),f=B(n,m);O(()=>{if(!u.__demoMode&&u.menuState===0&&c&&u.activationTrigger!==0)return ve().requestAnimationFrame(()=>{var y,N;(N=(y=m.current)==null?void 0:y.scrollIntoView)==null||N.call(y,{block:"nearest"})})},[u.__demoMode,m,c,u.menuState,u.activationTrigger,u.activeItemIndex]);let b=ge(m),t=p.useRef({disabled:a,domRef:m,get textValue(){return b()}});O(()=>{t.current.disabled=a},[t,a]),O(()=>(d({type:5,id:r,dataRef:t}),()=>d({type:6,id:r})),[t,r]);let i=g(()=>{d({type:1})}),E=g(y=>{if(a)return y.preventDefault();d({type:1}),ee(u.buttonElement)}),h=g(()=>{if(a)return d({type:2,focus:x.Nothing});d({type:2,focus:x.Specific,id:r})}),$=Fe(),P=g(y=>{$.update(y),!a&&(c||d({type:2,focus:x.Specific,id:r,trigger:0}))}),k=g(y=>{$.wasMoved(y)&&(a||c||d({type:2,focus:x.Specific,id:r,trigger:0}))}),M=g(y=>{$.wasMoved(y)&&(a||c&&d({type:2,focus:x.Nothing}))}),[S,F]=Z(),[R,v]=_e(),_=p.useMemo(()=>({active:c,focus:c,disabled:a,close:i}),[c,a,i]),Q={id:r,ref:f,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":S,"aria-describedby":R,disabled:void 0,onClick:E,onFocus:h,onPointerEnter:P,onMouseEnter:P,onPointerMove:k,onMouseMove:k,onPointerLeave:M,onMouseLeave:M},U=D();return w.createElement(F,null,w.createElement(v,null,U({ourProps:Q,theirProps:s,slot:_,defaultTag:Ze,name:"Menu.Item"})))}let tt="div";function nt(e,n){let[l,r]=Z(),a=e,s={ref:n,"aria-labelledby":l,role:"group"},u=D();return w.createElement(r,null,u({ourProps:s,theirProps:a,slot:{},defaultTag:tt,name:"Menu.Section"}))}let rt="header";function at(e,n){let l=p.useId(),{id:r=`headlessui-menu-heading-${l}`,...a}=e,s=Ce();O(()=>s.register(r),[r,s.register]);let u={id:r,ref:n,role:"presentation",...s.props};return D()({ourProps:u,theirProps:a,slot:{},defaultTag:rt,name:"Menu.Heading"})}let lt="div";function st(e,n){let l=e,r={ref:n,role:"separator"};return D()({ourProps:r,theirProps:l,slot:{},defaultTag:lt,name:"Menu.Separator"})}let ot=T(qe),ut=T(ze),it=T(Ye),ct=T(et),dt=T(nt),mt=T(at),ft=T(st),ht=Object.assign(ot,{Button:ut,Items:it,Item:ct,Section:dt,Heading:mt,Separator:ft});function pt(e,n){const l=Math.ceil(e.length/n),r=[];for(let a=0;a<l;a++){const s=a*n,u=s+n;r.push(e.slice(s,u))}return r}const St=({text:e,maxLineLength:n,header:l})=>{const r=p.useRef(null),a=p.useRef(null),{formattedText:s,lineNumbers:u}=p.useMemo(()=>{const c=pt(e,n),m=[];for(let t=0;t<=c.length-1;t++)m.push(t*n+1);l!==void 0&&(c.unshift(l),m.unshift(""));const f=c.join(`
`),b=m.join(`
`);return{formattedText:f,lineNumbers:b}},[e,n,l]);p.useEffect(()=>{r.current===null||a.current===null||(r.current.style.height=`${r.current.scrollHeight+4}px`,a.current.style.height=`${r.current.scrollHeight+4}px`)},[s]);const d="leading-6";return A.jsxs("div",{className:"flex",children:[A.jsx("textarea",{readOnly:!0,value:u,className:`flex-none w-20 h-full text-right text-gray-500 border-none  resize-none select-none  border-r border-gray-100  ${d} p-0 font-mono `,style:{pointerEvents:"none"},ref:a}),A.jsx("textarea",{readOnly:!0,value:s,"data-testid":"fixed-length-text-viewer",className:`font-mono resize-none select-none h-content flex-grow whitespace-pre bg-transparent border-0 focus:outline-none focus:ring-0 ${d} p-0 pl-3 text-gray-800`,ref:r})]})},Et=({children:e})=>A.jsx("div",{className:"tabs -mb-px tabs-lifted flex flex-wrap",children:e}),$t=({isActive:e,label:n,onClick:l})=>A.jsx("button",{className:`tab ${e?"tab-active font-semibold":""}`,onClick:l,children:n}),Pt=({children:e})=>A.jsx("div",{className:"border p-4",children:e});export{Et as B,ct as E,St as F,ut as I,$t as a,Pt as b,it as g,ht as r};
